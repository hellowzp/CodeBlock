#include <stdlib.h>
#include "queuen.h"

/*------------------------------------------------------------------------------
		definitions (defines, typedefs, ...)
------------------------------------------------------------------------------*/


/*------------------------------------------------------------------------------
		function prototypes
------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------
		global variable declarations
------------------------------------------------------------------------------*/


/*------------------------------------------------------------------------------
		implementation code
------------------------------------------------------------------------------*/


//----------------------------------------------------------------------------//
ErrCode Init( Stack **s )
//----------------------------------------------------------------------------//
{
#ifdef DEBUG
	printf( "\nInit() called\n" );
#endif
    Stack *t;
	t = (Stack *) malloc ( sizeof(Stack) );
	if (t == NULL )
    {
        *s = NULL;
        return ERR_MEM;
    }

	t->rear = 0;	/* indicates empty stack */

	*s = t;
	return ERR_NONE;
}

//----------------------------------------------------------------------------//
ErrCode Destroy( Stack **s )
//----------------------------------------------------------------------------//
{
#ifdef DEBUG
	printf( "\nDestroy() called\n" );
#endif
	free(*s);
	*s = NULL;
	return ERR_NONE;
}

//----------------------------------------------------------------------------//
ErrCode Push( Stack * s, const Element element )
//----------------------------------------------------------------------------//
{
#ifdef DEBUG
	printf( "\nPush() called\n" );
#endif
	if (  s->rear == MAX_STACK_SIZE )
		return ERR_FULL;

	s->data[s->rear++] = element;
	return ERR_NONE;
}

//----------------------------------------------------------------------------//
ErrCode Pop( Stack * s )
//----------------------------------------------------------------------------//
{
#ifdef DEBUG
	printf( "\nPop() called\n" );
#endif
	if ( s->rear == 0 )
		return ERR_EMPTY;

	s->rear--;
	return ERR_NONE;
}

//----------------------------------------------------------------------------//
ErrCode Rear( const Stack * s, Element * element )
//----------------------------------------------------------------------------//
{
#ifdef DEBUG
	printf( "\nTop() called\n" );
#endif
	if ( s->rear == 0 )
		return ERR_EMPTY;
	*element = s->data[s->rear-1];
	return ERR_NONE;
}

//----------------------------------------------------------------------------//
unsigned int StackSize( const Stack * s )
//----------------------------------------------------------------------------//
{
#ifdef DEBUG
	printf( "\nStackSize() called\n" );
#endif
	return ( s->rear );
}

