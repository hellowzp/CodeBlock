#include "hero.h"
#include <iostream>
#include "mainwindow.h"
#include <QTransform>
#include "opponent.h"
#include <QApplication>


Hero::Hero(int role, int id, int x, int y, int healthPercentage, int magicPercentage):Tile(x, y, 0)
{

    this->_id = id;
    this->_role = role;

    this->_healthBar = new StatusBar(StatusBar::HealthBar, this);
    this->_healthBar->setTransform(QTransform().translate(0, -12));
    this->_healthBar->setPercentage(healthPercentage);
    this->_magicBar = new StatusBar(StatusBar::MagicBar, this);
    this->_magicBar->setTransform(QTransform().translate(0, -5));
    this->_magicBar->setPercentage(magicPercentage);

    this->setPos(this->getXPos() * SCALE_FACTOR, this->getYPos() * SCALE_FACTOR);


    if (role == PLAYER_ROLE_MAGE) {

        this->setPixmap(QPixmap(":/world/angry-bird-yellow-icon.png"));
    } else if (role == PLAYER_ROLE_PRIEST) {

        this->setPixmap(QPixmap(":/world/angry-bird-green-icon.png"));
    } else if (role == PLAYER_ROLE_WORRIOR) {

        this->setPixmap(QPixmap(":/world/angry-bird-icon.png"));
    }

}




void Hero::setWorld(WorldView *world)
{
    this->_world = world;
    this->_magic.setWorld(world);
}

HeroMagic &Hero::getMagic()
{
    return _magic;
}

void Hero::setHealthPercentage(int percentage)
{
    this->_healthBar->setPercentage(percentage);
}



int Hero::getId()
{
    return _id;
}










